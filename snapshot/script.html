<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--
 | Generated by Apache Maven Doxia at 2014-01-19
 | Rendered using Apache Maven Fluido Skin 1.2.2
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>iCasa</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido.min.js"></script>

          
                
        <?xml version="1.0" encoding="UTF-8"?>
<link rel="stylesheet" type="text/css" href="./css/site.css"/>
      
                
        <?xml version="1.0" encoding="UTF-8"?>
<link rel="stylesheet" type="text/css" href="./css/font-awesome.css"/>
      
                
        <?xml version="1.0" encoding="UTF-8"?>
<script type="text/javascript">var _gaq = _gaq || [];
                _gaq.push(['_setAccount', 'UA-35847694-2']);
                _gaq.push(['_trackPageview']);

                (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();</script>
      
                
        <?xml version="1.0" encoding="UTF-8"?>
<script type="text/javascript">$(document).ready(function () {
                $("pre code").parent().addClass("prettyprint");
                prettyPrint();
                });</script>
      
                
        <?xml version="1.0" encoding="UTF-8"?>
<link rel="shortcut icon" href="favicon.png"/>
          
    <meta name="Date-Revision-yyyymmdd" content="20140119" />
    <meta http-equiv="Content-Language" content="en" />
            </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="http://github.com/AdeleResearchGroup/iCasa">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 100;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                                  <a href="#" id="bannerLeft">
                                                                                                <img src="icasa-small.png"  alt="iCasa - Digital Home Platform and Simulator Tool"/>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2014-01-19</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 1.2.6-SNAPSHOT</li>
                      
                
                    
      
                            </ul>
      </div>

            <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
                
                    
                                    <h3>iCasa</h3>
                  <ul>
                  <li class="none">
                          <a href="index.html" title="Home">Home</a>
            </li>
                  <li class="none">
                          <a href="license.html" title="License">License</a>
            </li>
                  <li class="none">
                          <a href="overview.html" title="Overview">Overview</a>
            </li>
                  <li class="none">
                          <a href="architecture.html" title="Architecture">Architecture</a>
            </li>
                  <li class="none">
                          <a href="download.html" title="Download">Download</a>
            </li>
                  <li class="none">
                          <a href="install.html" title="Install">Install</a>
            </li>
                  <li class="none">
                          <a href="requires-device.html" title="Device Injection in iCasa">Device Injection in iCasa</a>
            </li>
                  <li class="none">
                          <a href="trackers.html" title="iCasa Trackers">iCasa Trackers</a>
            </li>
                  <li class="none">
                          <a href="technical-services.html" title="Technical Services">Technical Services</a>
            </li>
                  <li class="none">
                          <a href="faq.html" title="FAQ">FAQ</a>
            </li>
          </ul>
                        <h3>User Guide</h3>
                  <ul>
                  <li class="none">
                          <a href="guide.html" title="Simulator GUI Guide">Simulator GUI Guide</a>
            </li>
                                                              <li class="expanded">
                          <a href="#" title="First App">First App</a>
                    <ul>
                      <li class="none">
                          <a href="tutoIDE.html" title="With iCasa IDE">With iCasa IDE</a>
            </li>
              </ul>
        </li>
                  <li class="none">
            <strong>Script Language</strong>
          </li>
                  <li class="none">
                          <a href="rest-api.html" title="REST API">REST API</a>
            </li>
                  <li class="none">
                          <a href="gogo-commands.html" title="Gogo commands">Gogo commands</a>
            </li>
                  <li class="none">
                          <a href="building-device.html" title="Device Building Tutorial">Device Building Tutorial</a>
            </li>
                  <li class="none">
                          <a href="apidocs/index.html" title="Javadoc">Javadoc</a>
            </li>
          </ul>
                        <h3>Advanced tutorials</h3>
                  <ul>
                  <li class="none">
                          <a href="building-command.html" title="Building iCasa Commands">Building iCasa Commands</a>
            </li>
          </ul>
                        <h3>Simulated Devices</h3>
                  <ul>
                  <li class="none">
                          <a href="lights.html" title="Lights">Lights</a>
            </li>
                  <li class="none">
                          <a href="heater.html" title="Heater/Cooler">Heater/Cooler</a>
            </li>
                  <li class="none">
                          <a href="detectors.html" title="Detectors">Detectors</a>
            </li>
          </ul>
                      
                    
                            <form id="search-form" action="http://www.google.com/search" method="get" >
    
  <input value="http://adeleresearchgroup.github.com/iCasa" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=search-form"></script>
          
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
        <div id="bodyColumn"  class="span10" >
                                  
            <h1>ICasa Script Language</h1>

<p>ICasa Simulation module provides a script language that can be used to create scenarios in order to test pervasive applications. In the next section we show the instructions set supported by the language and their (XML) syntax.</p>

<p><strong><em>Outline</em></strong></p>

<ul>
<li><a href="#Syntax">Script Syntax</a></li>
<li><a href="#General">General Instructions</a></li>
<li><a href="#Zone">Zone Instructions</a></li>
<li><a href="#Device">Device Instructions</a></li>
<li><a href="#Person">Person Instructions</a></li>
<li><a href="#Scenario">Scenario Example</a></li>
<li><a href="#Deployment">Script Deployment</a></li>
</ul>

<p><a name="Syntax"></a></p>

<h2>Script File Syntax</h2>

<p>Scenarios in iCasa simulation module are specified in a XML file using the tag <strong>behavior</strong>. </p>

<p><em>Example:</em></p>

<pre><code>&lt;behavior startdate="03/10/2011-00:00:00" factor="1440"&gt;
   &lt;!-- Scenario instructions --&gt;
&lt;/behavior&gt;
</code></pre>

<table cellpadding="2" cellspacing="0" border="1">
<tr>
  <th>Attribute
  </th><th>Description
  </th>
</tr>
<tr>
  <td>startdate</td>
  <td>Starting date of script execution in format "dd/MM/yyyy-HH:mm:ss"</td>
</tr>
<tr>
  <td>factor</td>
  <td>speed factor for script execution</td>
</tr>
</table>

<p><a name="General"></a></p>

<h2>General Instructions</h2>

<h3>Delay</h3>

<p>Introduces a delay in (virtual) minutes between the previous instruction and the next one.</p>

<p><em>Example:</em></p>

<pre><code>&lt;delay value="60" /&gt;
</code></pre>

<p>or</p>

<pre><code>&lt;delay value="60" unit="h"/&gt;
</code></pre>

<table cellpadding="2" cellspacing="0" border="1">
<tr>
  <th>Attribute
  </th><th>Description
  </th>
</tr>
<tr>
  <td>value</td>
  <td>Time in (virtual) units</td>
</tr>
<tr>
  <td>unit</td>
  <td>Time unit, value it can be h (hours), m (minuts), s (seconds). Default value is m</td>
</tr>
</table>

<p><br></p>

<p><a name="Zone"></a></p>

<h2>Zone Instructions</h2>

<h3>Create Zone</h3>

<p>Creates a zone in application context</p>

<p><em>Example:</em></p>

<pre><code>&lt;create-zone id="kitchen"  leftX="410" topY="370" X-Length="245" Y-Length="210" /&gt;
</code></pre>

<p>or</p>

<pre><code>&lt;create-zone id="kitchen"  leftX="410" topY="370" bottomZ="0" X-Length="245" Y-Length="210" Z-Length="300" /&gt;
</code></pre>

<table cellpadding="2" cellspacing="0" border="1">
<tr>
  <th>Attribute
  </th><th>Description
  </th>
</tr>
<tr>
  <td>id</td>
  <td>Zone's Identifier</td>
</tr>
<tr>
  <td>leftX</td>
  <td>Left X coordinate value</td>
</tr>
<tr>
  <td>topY</td>
  <td>Top Y coordinate value</td>
</tr>
<tr>
  <td>bottomZ</td>
  <td>Bottom Z coordinate value</td>
</tr>
<tr>
  <td>X-Length</td>
  <td>Zone X-Length</td>
</tr>
<tr>
  <td>Y-Length</td>
  <td>Zone Y-Length</td>
</tr>
<tr>
  <td>Z-Length</td>
  <td>Zone Z-Length</td>
</tr>
</table>

<h3>Move Zone</h3>

<p>Move a zone in application context</p>

<p><em>Example:</em></p>

<pre><code>&lt;move-zone id="kitchen"  leftX="410" topY="370" /&gt;
</code></pre>

<table cellpadding="2" cellspacing="0" border="1">
<tr>
  <th>Attribute
  </th><th>Description
  </th>
</tr>
<tr>
  <td>id</td>
  <td>Zone's Identifier</td>
</tr>
<tr>
  <td>leftX</td>
  <td>New left X coordinate value</td>
</tr>
<tr>
  <td>topY</td>
  <td>New top Y coordinate value</td>
</tr>
</table>

<h3>Resize Zone</h3>

<p>Resize a zone in application context</p>

<p><em>Example:</em></p>

<pre><code>&lt;resize-zone id="kitchen"  X-Length="245" Y-Length="210" /&gt;
</code></pre>

<p>or</p>

<pre><code>&lt;resize-zone id="kitchen"  X-Length="245" Y-Length="210" Z-Length="210" /&gt;
</code></pre>

<table cellpadding="2" cellspacing="0" border="1">
<tr>
  <th>Attribute
  </th><th>Description
  </th>
</tr>
<tr>
  <td>id</td>
  <td>Zone's Identifier</td>
</tr>
<tr>
  <td>X-Length</td>
  <td>New zone X-Length</td>
</tr>
<tr>
  <td>Y-Length</td>
  <td>New zone Y-Length</td>
</tr>
<tr>
  <td>Z-Length</td>
  <td>New zone Z-Length</td>
</tr>
</table>

<h3>Add Variable to Zone</h3>

<p>It adds a simulation variable to a zone</p>

<p><em>Example:</em></p>

<pre><code>&lt;add-zone-variable zoneId="livingroom" variable="Temperature" /&gt;
</code></pre>

<table cellpadding="2" cellspacing="0" border="1">
<tr>
  <th>Attribute
  </th><th>Description
  </th>
</tr>
<tr>
  <td>zoneId</td>
  <td>Zone's Identifier</td>
</tr>
<tr>
  <td>variable</td>
  <td>Variable name</td>
</tr>
</table>

<h3>Modify Variable in Zone</h3>

<p>It modifies a simulation variable in a zone</p>

<p><em>Example:</em></p>

<pre><code>&lt;modify-zone-variable zoneId="kitchen" variable="Temperature" value="296.15"/&gt;
</code></pre>

<table cellpadding="2" cellspacing="0" border="1">
<tr>
  <th>Attribute
  </th><th>Description
  </th>
</tr>
<tr>
  <td>zoneId</td>
  <td>Zone's Identifier</td>
</tr>
<tr>
  <td>variable</td>
  <td>Variable name</td>
</tr>
<tr>
  <td>value</td>
  <td>Variable value</td>
</tr>
</table>

<p><a name="Device"></a></p>

<h2>Device Instructions</h2>

<h3>Create Device</h3>

<p>It creates a device instance in the application context</p>

<p><em>Example:</em></p>

<pre><code>&lt;create-device id="Pres-A1255D-D" type="iCasa.PresenceSensor" /&gt;
</code></pre>

<table cellpadding="2" cellspacing="0" border="1">
<tr>
  <th>Attribute
  </th><th>Description
  </th>
</tr>
<tr>
  <td>id</td>
  <td>Device's Identifier</td>
</tr>
<tr>
  <td>type</td>
  <td>Device's type</td>
</tr>
</table>

<h3>Remove Device</h3>

<p><em>Example:</em></p>

<pre><code>&lt;remove-device deviceId="Pres-A1255D-D" /&gt;
</code></pre>

<table cellpadding="2" cellspacing="0" border="1">
<tr>
  <th>Attribute
  </th><th>Description
  </th>
</tr>
<tr>
  <td>deviceId</td>
  <td>Device's Identifier</td>
</tr>
</table>

<p><br></p>

<h3>Move device into zone</h3>

<p>Places a device in a zone of application context.</p>

<p><em>Example:</em></p>

<pre><code>&lt;move-device-zone deviceId="BiLi-A7496W-S" zoneId="kitchen" /&gt;
</code></pre>

<table cellpadding="2" cellspacing="0" border="1">
<tr>
  <th>Attribute
  </th><th>Description
  </th>
</tr>
<tr>
  <td>deviceId</td>
  <td>Device's Identifier</td>
</tr>
<tr>
  <td>zoneId</td>
  <td>Zone's Identifier</td>
</tr>
</table>

<p><br></p>

<h3>Activate Device</h3>

<p>Changes the device's state to <strong>activated</strong>. </p>

<p><em>Example:</em></p>

<pre><code>&lt;activate-device deviceId="Pres-A1255D-D" /&gt;
</code></pre>

<table cellpadding="2" cellspacing="0" border="1">
<tr>
  <th>Attribute
  </th><th>Description
  </th>
</tr>
<tr>
  <td>deviceId</td>
  <td>Device's Identifier</td>
</tr>
</table>    

<p><br></p>

<h3>Deactivate Device</h3>

<p>Changes the device's state to <strong>deactivated</strong>. </p>

<p><em>Example:</em></p>

<pre><code>&lt;deactivate-device deviceId="Pres-A1255D-D" /&gt;
</code></pre>

<table cellpadding="2" cellspacing="0" border="1">
<tr>
  <th>Attribute
  </th><th>Description
  </th>
</tr>
<tr>
  <td>deviceId</td>
  <td>Device's Identifier</td>
</tr>
</table>    

<p><br></p>

<h3>Fault Device</h3>

<p>Changes the device's fault state to <strong>yes</strong>. </p>

<p><em>Example:</em></p>

<pre><code>&lt;fault-device deviceId="Pres-A1255D-D" /&gt;
</code></pre>

<table cellpadding="2" cellspacing="0" border="1">
<tr>
  <th>Attribute
  </th><th>Description
  </th>
</tr>
<tr>
  <td>deviceId</td>
  <td>Device's Identifier</td>
</tr>
</table>    

<p><br></p>

<h3>Repair Device</h3>

<p>Changes the device's fault state to <strong>no</strong>. </p>

<p><em>Example:</em></p>

<pre><code>&lt;repair-device deviceId="Pres-A1255D-D" /&gt;
</code></pre>

<table cellpadding="2" cellspacing="0" border="1">
<tr>
  <th>Attribute
  </th><th>Description
  </th>
</tr>
<tr>
  <td>deviceId</td>
  <td>Device's Identifier</td>
</tr>
</table>

<p><br></p>

<h3>Set device property value</h3>

<p>Set the value of the device property</p>

<p><em>Example:</em></p>

<pre><code>&lt;set-device-property deviceId="BiLi-A7496W-S" property="power_status" value="true"/&gt;
</code></pre>

<table cellpadding="2" cellspacing="0" border="1">
<tr>
  <th>Attribute
  </th><th>Description
  </th>
</tr>
<tr>
  <td>deviceId</td>
  <td>Device's Identifier</td>
</tr>
<tr>
  <td>property</td>
  <td>property name</td>
</tr>
<tr>
  <td>value</td>
  <td>property value</td>
</tr>
</table>

<p><br></p>

<p><a name="Person"></a></p>

<h2>Person Instructions</h2>

<p><br></p>

<h3>Create Person</h3>

<p>Adds a person to the simulation context</p>

<p><em>Example:</em></p>

<pre><code>&lt;create-person id="Paul" type="Grandfather" /&gt;
</code></pre>

<table cellpadding="2" cellspacing="0" border="1">
<tr>
  <th>Attribute
  </th><th>Description
  </th>
</tr>
<tr>
  <td>id</td>
  <td>Person's Identifier</td>
</tr>
<tr>
  <td>type</td>
  <td>Person's type</td>
</tr>
</table>

<p><br></p>

<h3>Move Person into zone</h3>

<p>Places a person in a zone in the application context</p>

<p><em>Example:</em></p>

<pre><code>&lt;move-person-zone personId="Paul" zoneId="bedroom"  /&gt;
</code></pre>

<table cellpadding="2" cellspacing="0" border="1">
<tr>
  <th>Attribute
  </th><th>Description
  </th>
</tr>
<tr>
  <td>personId</td>
  <td>Person's Identifier</td>
</tr>
<tr>
  <td>zoneId</td>
  <td>Zone's identifier</td>
</tr>
</table>

<p><br></p>

<p><a name="Scenario"></a></p>

<h2>Scenario Example</h2>

<pre><code>&lt;behavior startdate="27/10/2011-00:00:00" factor="1440"&gt;

   &lt;!-- Creation of kitchen zone --&gt;   
   &lt;create-zone id="kitchen"  leftX="410" topY="370" X-Length="245" Z-Length="210" /&gt;    

   &lt;!-- Adding and setting variables in kitchen zone --&gt;
   &lt;add-zone-variable zoneId="kitchen" variable="Temperature" /&gt;
   &lt;add-zone-variable zoneId="kitchen" variable="Illuminance" /&gt;
   &lt;modify-zone-variable zoneId="kitchen" variable="Temperature" value="296.15"/&gt;
   &lt;modify-zone-variable zoneId="kitchen" variable="Illuminance" value="0"/&gt;

   &lt;!-- Creating and placing devices in kitchen zone --&gt;
   &lt;create-device id="Pres-A1255D-D" type="iCasa.PresenceSensor" /&gt;
   &lt;create-device id="Ther-A3654Q-S" type="iCasa.Thermometer" /&gt;
   &lt;create-device id="Phot-A4894S-S" type="iCasa.Photometer" /&gt;
   &lt;create-device id="BiLi-A7496W-S" type="iCasa.BinaryLight" /&gt;    
   &lt;move-device-zone deviceId="Pres-A1255D-D" zoneId="kitchen" /&gt;
   &lt;move-device-zone deviceId="Ther-A3654Q-S" zoneId="kitchen" /&gt;
   &lt;move-device-zone deviceId="Phot-A4894S-S" zoneId="kitchen" /&gt;
   &lt;move-device-zone deviceId="BiLi-A7496W-S" zoneId="kitchen" /&gt;

   &lt;!-- Creation of livingroom zone --&gt; 
   &lt;create-zone id="livingroom" leftX="410" topY="28" X-Length="245" Y-Length="350" /&gt;
   &lt;!-- Adding and setting variables in kitchen zone --&gt;

   &lt;add-zone-variable zoneId="livingroom" variable="Temperature" /&gt;
   &lt;add-zone-variable zoneId="livingroom" variable="Illuminance" /&gt;
   &lt;add-zone-variable zoneId="livingroom" variable="Volume" /&gt;
   &lt;modify-zone-variable zoneId="livingroom" variable="Temperature" value="295.15"/&gt;
   &lt;modify-zone-variable zoneId="livingroom" variable="Illuminance" value="5"/&gt;
   &lt;modify-zone-variable zoneId="livingroom" variable="Volume" value="10"/&gt;

   &lt;!-- Others instructions --&gt; 
   &lt;delay value="100" /&gt;    
   &lt;deactivate-device deviceId="Pres-A1255D-D" /&gt;
   &lt;delay value="100" /&gt;
   &lt;activate-device deviceId="Pres-A1255D-D" /&gt;
   &lt;delay value="100" /&gt;
   &lt;fault-device deviceId="Pres-A1255D-D" /&gt;
   &lt;delay value="100" /&gt;
   &lt;repair-device deviceId="Pres-A1255D-D" /&gt;
   &lt;delay value="100" /&gt;
   &lt;remove-device deviceId="Pres-A1255D-D" /&gt;   
   &lt;delay value="100" /&gt;
   &lt;set-device-property deviceId="BiLi-A7496W-S" property="power_status" value="true"/&gt;

&lt;/behavior&gt;
</code></pre>

<p><a name="Deployment"></a></p>

<h2>Script Deployment</h2>

<p>New scripts have to be deployed to the directory <strong>ICASA_HOME/scripts</strong> in the gateway. All scripts files must have the .bhv extensions to be recognized by the iCasa platform.</p>

                  </div>
            </div>
      
    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                    2012-2014
                        <a href="http://www-adele.imag.fr/">ADELE Research Group</a>.
            All Rights Reserved.      
                    
      </div>

        
        
                </div>
    </footer>
  </body>
</html>
