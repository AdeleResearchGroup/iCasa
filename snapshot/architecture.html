
<!DOCTYPE html>
<!--
 Generated by Apache Maven Doxia at 2014-09-23
 Rendered using Reflow Maven Skin 1.1.0 (http://andriusvelykis.github.io/reflow-maven-skin)
-->
<html  xml:lang="en" lang="en">

	<head>
		<meta charset="UTF-8" />
		<title>iCasa - iCasa Architecture</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="" />
		<meta http-equiv="content-language" content="en" />

		<link href="http://netdna.bootstrapcdn.com/bootswatch/2.3.2/cerulean/bootstrap.min.css" rel="stylesheet" />
		<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-responsive.min.css" rel="stylesheet" />
		<link href="./css/bootswatch.css" rel="stylesheet" />
		<link href="./css/reflow-skin.css" rel="stylesheet" />

		<link href="http://yandex.st/highlightjs/7.5/styles/github.min.css" rel="stylesheet" />
		
		<link href="./css/lightbox.css" rel="stylesheet" />
		
		<link href="./css/site.css" rel="stylesheet" />
		<link href="./css/print.css" rel="stylesheet" media="print" />
		
		<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->


		
<link rel="stylesheet" type="text/css" href="./css/site.css"/>
<link rel="stylesheet" type="text/css" href="./css/font-awesome.css"/>
<script type="text/javascript">var _gaq = _gaq || [];
                _gaq.push(['_setAccount', 'UA-35847694-2']);
                _gaq.push(['_trackPageview']);

                (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();</script>
<script type="text/javascript">$(document).ready(function () {
                $("pre code").parent().addClass("prettyprint");
                prettyPrint();
                });</script>
<link rel="shortcut icon" href="favicon.png"/>
	</head>

	<body class="page-architecture project-icasareactor" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

		<div class="navbar navbar-fixed-top navbar-inverse">
			<div class="navbar-inner">
				<div class="container">
					<a class="btn btn-navbar" data-toggle="collapse" data-target="#top-nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<a class="brand" href="index.html"><span class="color-highlight">iCasa</span></a>
					<div class="nav-collapse collapse" id="top-nav-collapse">
						<ul class="nav pull-right">
							<li ><a href="https://github.com/AdeleResearchGroup/iCasa" title="GitHub project" class="externalLink">GitHub project</a></li>
							<li ><a href="download.html" title="Download">Download</a></li>
							<li class="dropdown active">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">iCasa <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="index.html" title="Home">Home</a></li>
									<li ><a href="license.html" title="License">License</a></li>
									<li ><a href="overview.html" title="Overview">Overview</a></li>
									<li class="active"><a href="" title="Architecture">Architecture</a></li>
									<li ><a href="download.html" title="Download">Download</a></li>
									<li ><a href="install.html" title="Install">Install</a></li>
									<li ><a href="requires-device.html" title="Device Injection in iCasa">Device Injection in iCasa</a></li>
									<li ><a href="trackers.html" title="iCasa Trackers">iCasa Trackers</a></li>
									<li ><a href="technical-services.html" title="Technical Services">Technical Services</a></li>
									<li ><a href="faq.html" title="FAQ">FAQ</a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">User Guide <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="guide.html" title="Simulator GUI Guide">Simulator GUI Guide</a></li>
									<li class="dropdown-submenu ">
										<a href="architecture.html#" title="First App">First App</a>
										<ul class="dropdown-menu">
											<li ><a href="tutoIDE.html" title="With iCasa IDE">With iCasa IDE</a></li>
										</ul>
									</li>
									<li ><a href="script.html" title="Script Language">Script Language</a></li>
									<li ><a href="rest-api.html" title="REST API">REST API</a></li>
									<li ><a href="gogo-commands.html" title="Gogo commands">Gogo commands</a></li>
									<li ><a href="building-device.html" title="Device Building Tutorial">Device Building Tutorial</a></li>
									<li ><a href="apidocs/index.html" title="Javadoc">Javadoc</a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Advanced tutorials <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="building-command.html" title="Building iCasa Commands">Building iCasa Commands</a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Simulated Devices <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="lights.html" title="Lights">Lights</a></li>
									<li ><a href="heater.html" title="Heater/Cooler">Heater/Cooler</a></li>
									<li ><a href="detectors.html" title="Detectors">Detectors</a></li>
								</ul>
							</li>
						</ul>
					</div><!--/.nav-collapse -->
				</div>
			</div>
		</div>
		
	<div class="container">
	
	<!-- Masthead
	================================================== -->

	<header>
		<div>
			<ul class="breadcrumb">
				<li class="projectVersion version-date">Version: 1.2.7-SNAPSHOT</li>
				<li class="divider">|</li>
				<li class="publishDate version-date">Last Published: 2014-09-23</li>
			</ul>
		</div>
	</header>

	<div class="main-body">
	<div class="row">
		<div class="span8">
			<div class="body-content">
<div class="page-header">
 <h1 id="icasa_architecture">iCasa Architecture</h1>
</div> 
<p>iCasa framework provides required support to build digital home applications. The architecture is composed of several parts:</p> 
<ul> 
 <li><a href="#PlatformArchitecture">iCasa Execution Platform</a></li> 
 <li><a href="#DeviceModel">iCasa Device Model</a></li> 
 <li><a href="#ApplicationsArchitecture">iCasa Applications</a></li> 
 <li><a href="#WebApplicationsArchitecture">Web Applications</a></li> 
 <li><a href="#SimulatorArchitecture">iCasa Simulator</a></li> 
</ul> 
<p><a name="PlatformArchitecture"></a></p> 
<h2 id="1_platform_architecture">1. Platform Architecture</h2> 
<p><img src="architecture/architecture.png" alt="iCasa Architecture" title="iCasa Architecture" /></p> 
<p>iCasa platform is built on top of the OSGi platform (distributions rely on the Felix platform but you should be able to use your preferred one). The platform has been designed to be extensible. To this end, it uses a dynamic component model called iPOJO. It is decomposed with following components:</p> 
<ul> 
 <li>ROSE brings integration of external resources such as devices. It forces a clear separation between device discovery and device communication. It is extensible that allows easy support of new communication protocols. Every device is reified as an OSGi service which complies to the iCasa Device model.</li> 
 <li>ContextManager brings contextual information to the platform such as localization properties. As a result, all devices may be enriched with localization properties.</li> 
 <li>The DeviceManager component allows you to fine tune access rights to devices for applications at a method granularity grain.</li> 
 <li>The ApplicationManager is in charge of application installation/uninstall/update.</li> 
 <li>A TechnicalService is an optional component that has full access to the platform and brings new functionality to it. Several ones are available into the platform (Preferences, Clock, Scheduling, ZoneDimension...).</li> 
 <li>The RemoteAccess component provides a REST like API to web applications. In addition, it provides a notification channel based on Atmosphere framework that allows you to choose a transport communication protocol according to your needs.</li> 
</ul> 
<p><a name="DeviceModel"></a></p> 
<h2 id="2_icasa_device_model">2. iCasa Device Model</h2> 
<p>iCasa framework provides a device model that must be used by device developers to expose device functionality, and by application developers to access that functionality. In iCasa device model, each device has to publish a description based in a Java interface and a set of properties. Device interface is used to expose device functionality, on the other hand properties set is used to known device state. Each device MUST implement the <strong><em>fr.liglab.adele.icasa.device.GenericDevice</em></strong> interface that requires to expose a unique identifier called serial number.</p> 
<p><a name="ApplicationsArchitecture"></a></p> 
<h2 id="3_icasa_applications">3. iCasa Applications</h2> 
<p>iCasa applications are developed following the application model of the OSGi platform, in iCasa each device is exposed as an OSGi service in the its register. In OSGi each service can provide one or more interfaces, in iCasa each device exposes the GenericDevice and also the specific device interface. In addition, an iCasa application must be packaged as a Deployment package to be deployed on the platform. The platform will automatically compute the devices which are eligible for a specific application and exposes them to it after access will be granted.</p> 
<p><a name="WebApplicationsArchitecture"></a></p> 
<h2 id="4_web_application">4. Web application</h2> 
<p>The web applications provided by iCasa are Simulator GUI and dashboard GUI. Their architecture is the same with following parts:</p> 
<ul> 
 <li>A Web Browser (Firefox) that executes the application code.</li> 
 <li>The iCasa home gateway that embeds the iCasa execution platform and the web resources.</li> 
</ul> 
<p>The web application part is mostly written in Coffeescript then compiled to Javascript. It implements the architecture described in the following picture.</p> 
<p><img src="architecture/webappArchitecture.png" alt="iCasa Web Application Architecture" title="Web Application Architecture" /></p> 
<p>It contains following components:</p> 
<ul> 
 <li>The DataModel is responsible to keep state of the resources. It relies on the Backbone framework which provides easy integration with REST like API.</li> 
 <li>The NotificationManager listens through a specific communication channel to notifications from the iCasa platform in order to keep consistent the state in the web application. It uses the Atmosphere framework.</li> 
 <li>The ViewModel is a data model dedicated to the view rendering. it relies on Knockout framework.</li> 
 <li>The Views are implemented as html handlebars templates. Knockout synchronizes the views and .</li> 
 <li>DeviceWidgets and Plugins may be implemented as HUBU components that provides predefined service contracts.</li> 
</ul> 
<p>The full stack also contains:</p> 
<ul> 
 <li>JQuery, JQuery UI and Bootstrap to build UI.</li> 
 <li>Prefixfree to be as independent as possible from browser css specificities.</li> 
 <li>Handlebars is used to define HTML templates of the different panels.</li> 
 <li>Log4Javascript as our defualt javascript logger.</li> 
 <li>RequireJS to modularize our web applications as an assembly of modules that precisely define dependencies and the data they export.</li> 
</ul> 
<p><a name="SimulatorArchitecture"></a></p> 
<h2 id="5_icasa_simulator">5. iCasa Simulator</h2> 
<p>The simulator module allows developers to test their digital home applications. It enriches the platform with simulation functionalities and provides a web application to manage it.</p>
			</div>
		</div>
		<div class="span4">
			<div id="toc-sidebar">
				<div class="well">
					<ul class="nav nav-list">
						<li class="nav-header">Table of Contents</li>
		<li class="dropdown"><a href="#icasa_architecture" title="iCasa Architecture">iCasa Architecture <b class="caret"></b></a>
			<ul class="nav nav-list">
		<li><a href="#1_platform_architecture" title="1. Platform Architecture">1. Platform Architecture</a>
		<li><a href="#2_icasa_device_model" title="2. iCasa Device Model">2. iCasa Device Model</a>
		<li><a href="#3_icasa_applications" title="3. iCasa Applications">3. iCasa Applications</a>
		<li><a href="#4_web_application" title="4. Web application">4. Web application</a>
		<li><a href="#5_icasa_simulator" title="5. iCasa Simulator">5. iCasa Simulator</a>
				<li class="divider"></li>
			</ul>
		</li>
					</ul>
				</div>
			</div>
		</div>
	</div>
	</div>

	</div><!-- /container -->
	
	<!-- Footer
	================================================== -->
	<footer class="well">
		<div class="container">
			<div class="row">
				<div class="span2 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">iCasa</li>
						<li >
							<a href="index.html" title="Home">Home</a>
						</li>
						<li >
							<a href="license.html" title="License">License</a>
						</li>
						<li >
							<a href="overview.html" title="Overview">Overview</a>
						</li>
						<li class="active">
							<a href="#" title="Architecture">Architecture</a>
						</li>
						<li >
							<a href="download.html" title="Download">Download</a>
						</li>
						<li >
							<a href="install.html" title="Install">Install</a>
						</li>
						<li >
							<a href="requires-device.html" title="Device Injection in iCasa">Device Injection in iCasa</a>
						</li>
						<li >
							<a href="trackers.html" title="iCasa Trackers">iCasa Trackers</a>
						</li>
						<li >
							<a href="technical-services.html" title="Technical Services">Technical Services</a>
						</li>
						<li >
							<a href="faq.html" title="FAQ">FAQ</a>
						</li>
					</ul>
				</div>
				<div class="span2 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">User Guide</li>
						<li >
							<a href="guide.html" title="Simulator GUI Guide">Simulator GUI Guide</a>
						</li>
						<li >
							<a href="architecture.html#" title="First App">First App <i class="icon-chevron-down"></i></a>
							<ul class="nav nav-list">
						<li >
							<a href="tutoIDE.html" title="With iCasa IDE">With iCasa IDE</a>
						</li>
							</ul>
						</li>
						<li >
							<a href="script.html" title="Script Language">Script Language</a>
						</li>
						<li >
							<a href="rest-api.html" title="REST API">REST API</a>
						</li>
						<li >
							<a href="gogo-commands.html" title="Gogo commands">Gogo commands</a>
						</li>
						<li >
							<a href="building-device.html" title="Device Building Tutorial">Device Building Tutorial</a>
						</li>
						<li >
							<a href="apidocs/index.html" title="Javadoc">Javadoc</a>
						</li>
					</ul>
				</div>
				<div class="span2 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Advanced tutorials</li>
						<li >
							<a href="building-command.html" title="Building iCasa Commands">Building iCasa Commands</a>
						</li>
					</ul>
				</div>
				<div class="span3 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Simulated Devices</li>
						<li >
							<a href="lights.html" title="Lights">Lights</a>
						</li>
						<li >
							<a href="heater.html" title="Heater/Cooler">Heater/Cooler</a>
						</li>
						<li >
							<a href="detectors.html" title="Detectors">Detectors</a>
						</li>
					</ul>
				</div>
			</div>
		</div>
	</footer>
		
	<div class="container subfooter">
		<div class="row">
			<div class="span12">
				<p class="pull-right"><a href="#">Back to top</a></p>
				<p class="copyright">Copyright &copy;2012-2014 <a href="http://www-adele.imag.fr/">ADELE Research Group</a>. All Rights Reserved.</p>
				<p><a href="http://github.com/andriusvelykis/reflow-maven-skin" title="Reflow Maven skin">Reflow Maven skin</a> by <a href="http://andrius.velykis.lt" target="_blank" title="Andrius Velykis">Andrius Velykis</a>.</p>
			</div>
		</div>
	</div>

	<!-- Le javascript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
	
	<script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
	<script src="./js/lightbox.js"></script>
	<script src="./js/jquery.smooth-scroll.min.js"></script>
	<!-- back button support for smooth scroll -->
	<script src="./js/jquery.ba-bbq.min.js"></script>
	<script src="http://yandex.st/highlightjs/7.5/highlight.min.js"></script>

	<script src="./js/reflow-skin.js"></script>
	
	</body>
</html>
